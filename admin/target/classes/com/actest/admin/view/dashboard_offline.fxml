<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" fx:controller="com.actest.admin.offline.controller.DashboardController" stylesheets="@../../../../styles.css">
    <left>
        <VBox styleClass="sidebar" spacing="10" prefWidth="250">
            <Label text="Offline Server" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-padding: 20; -fx-text-fill: #0077cc;"/>
            <Button text="Exams" onAction="#showExams" styleClass="sidebar-button" maxWidth="Infinity"/>
            <Button text="Students" onAction="#showClients" styleClass="sidebar-button" maxWidth="Infinity"/>
            <Region VBox.vgrow="ALWAYS"/>
            <Button text="Stop Server" onAction="#handleStopServer" styleClass="sidebar-button" maxWidth="Infinity" style="-fx-text-fill: #ff6b6b;"/>
        </VBox>
    </left>
    <center>
        <StackPane fx:id="contentArea" style="-fx-padding: 20;">
            <!-- Exams View -->
            <VBox fx:id="examsView" spacing="20">
                <HBox alignment="CENTER_LEFT" spacing="20">
                    <Label text="Local Exams" styleClass="header-label"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <javafx.scene.control.TextField fx:id="searchField" promptText="Search exams..." onKeyReleased="#handleSearch"/>
                    <Button text="Create Exam" onAction="#handleCreateExam" styleClass="button"/>
                </HBox>
                <javafx.scene.control.ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                    <VBox fx:id="examCardsContainer" spacing="15" style="-fx-padding: 10;"/>
                </javafx.scene.control.ScrollPane>
            </VBox>
            
            <!-- Students View -->
            <VBox fx:id="clientsView" spacing="20" visible="false">
                <Label text="Pending Requests" styleClass="sub-header-label"/>
                <javafx.scene.control.ScrollPane fitToWidth="true" prefHeight="200" style="-fx-background-color: transparent;">
                    <javafx.scene.layout.FlowPane fx:id="pendingStudentsContainer" hgap="15" vgap="15" style="-fx-padding: 10;"/>
                </javafx.scene.control.ScrollPane>
                
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Connected Students" styleClass="sub-header-label"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <javafx.scene.control.TextField fx:id="clientSearchField" promptText="Search students..." onKeyReleased="#handleClientSearch"/>
                </HBox>
                <javafx.scene.control.ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">
                    <javafx.scene.layout.FlowPane fx:id="connectedStudentsContainer" hgap="15" vgap="15" style="-fx-padding: 10;"/>
                </javafx.scene.control.ScrollPane>
            </VBox>
        </StackPane>
    </center>
</BorderPane>
